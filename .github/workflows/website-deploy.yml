name: Simple Web Application Deployment

on:
  push:
    branches:
      - master

jobs:
  deploy:
    name: Deploy to Apache Web Server on Azure
    runs-on: ubuntu-latest
    env:
      SERVER_PRIVATE_KEY: ${{ secrets.SSH_KEY }}
    steps:
      - name: Checkout the Code
        uses: actions/checkout@v2.4.2

      - name: Reading the Key
        run: |
          echo "$SERVER_PRIVATE_KEY" > key.pem
          cat key.pem

      - name: Steps to Deploy
        run: |
          touch devapacheserver.pem
          echo "${{ secrets.SSH_KEY }}" >> devapacheserver.pem
          cat devapacheserver.pem
